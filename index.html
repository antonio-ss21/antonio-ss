<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inventario M칩vil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ajuste m칩vil -->
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 10px; 
      background: #f9f9f9;
    }
    h1 { 
      color: #333; 
      text-align: center; 
    }
    .formulario {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      margin-top: 15px;
      cursor: pointer;
    }
    button:hover { opacity: 0.9; }
    table { 
      width: 100%; 
      border-collapse: collapse; 
      background: white;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td { 
      padding: 12px; 
      border-bottom: 1px solid #ddd; 
      text-align: left; 
      font-size: 14px;
    }
    th { background-color: #f2f2f2; }
    button.eliminar {
      background-color: #ff4d4d; 
      color: white; 
      border: none; 
      padding: 6px 10px; 
      border-radius: 5px;
      font-size: 12px;
    }
    button.eliminar:hover { opacity: 0.8; }

    /* 游녢 Ajustes responsivos */
    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }
      thead { display: none; }
      tr { 
        margin-bottom: 15px; 
        background: white; 
        border-radius: 8px; 
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        padding: 10px;
      }
      td { 
        border: none; 
        display: flex; 
        justify-content: space-between; 
        padding: 8px 5px;
      }
      td::before {
        content: attr(data-label);
        font-weight: bold;
        color: #333;
      }
    }
  </style>
</head>
<body>

  <h1>游닍 Inventario</h1>

  <div class="formulario">
    <label>Producto:</label>
    <input type="text" id="nombreProducto" placeholder="Nombre del producto">

    <label>Cantidad:</label>
    <input type="number" id="cantidadProducto" placeholder="Cantidad">

    <label>Categor칤a:</label>
    <input list="categorias" id="categoriaProducto" placeholder="Elige o escribe una categor칤a">
    <datalist id="categorias">
      <option value="Motor">
      <option value="Suspensi칩n y frenos">
      <option value="Carrocer칤a">
      <option value="Interior">
      <option value="Otros">
    </datalist>

    <button onclick="agregarProducto()">Agregar al Inventario</button>
    <button onclick="exportarPDF()">游늯 Exportar a PDF</button>
  </div>

  <table id="tablaInventario">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Categor칤a</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <!-- Productos se agregan aqu칤 -->
    </tbody>
  </table>

  <!-- Librer칤as para exportar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script>
    let inventario = JSON.parse(localStorage.getItem('inventario')) || [];

    function guardarInventario() {
      localStorage.setItem('inventario', JSON.stringify(inventario));
    }

    function agregarProducto() {
      const nombre = document.getElementById('nombreProducto').value.trim();
      const cantidad = parseInt(document.getElementById('cantidadProducto').value);
      const categoria = document.getElementById('categoriaProducto').value.trim();

      if(!nombre || isNaN(cantidad) || cantidad <= 0 || !categoria) {
        alert("Ingresa un nombre, cantidad y categor칤a v치lidos.");
        return;
      }

      inventario.push({nombre, cantidad, categoria});
      guardarInventario();
      actualizarTabla();

      document.getElementById('nombreProducto').value = '';
      document.getElementById('cantidadProducto').value = '';
      document.getElementById('categoriaProducto').value = '';
    }

    function eliminarProducto(index) {
      inventario.splice(index, 1);
      guardarInventario();
      actualizarTabla();
    }

    function actualizarTabla() {
      const tbody = document.getElementById('tablaInventario').getElementsByTagName('tbody')[0];
      tbody.innerHTML = '';
      inventario.forEach((item, index) => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td data-label="Producto">${item.nombre}</td>
          <td data-label="Cantidad">${item.cantidad}</td>
          <td data-label="Categor칤a">${item.categoria}</td>
          <td data-label=""><button class="eliminar" onclick="eliminarProducto(${index})">Eliminar</button></td>
        `;
        tbody.appendChild(fila);
      });
    }

    function exportarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("Inventario", 14, 20);

      // Ordenar por categor칤a
      const inventarioOrdenado = [...inventario].sort((a, b) => 
        a.categoria.localeCompare(b.categoria)
      );

      // Columnas y filas
      const columnas = ["Producto", "Cantidad", "Categor칤a"];
      const filas = inventarioOrdenado.map(item => [
        item.nombre, 
        item.cantidad.toString(), 
        item.categoria
      ]);

      // Dibujar tabla
      doc.autoTable({
        head: [columnas],
        body: filas,
        startY: 30
      });

      doc.save("inventario.pdf");
    }

    actualizarTabla();
  </script>

</body>
</html>
